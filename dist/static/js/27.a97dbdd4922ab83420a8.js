webpackJsonp([27],{"/LA5":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),s=i("vMJZ"),r={_id:"",name:"",password:""},o={data:function(){return{editType:"add",dialogFormVisible:!1,editingUser:{_id:"",name:"",password:""},users:[]}},created:function(){var e=this;Object(s.a)().then(function(t){e.users=t.list}).catch(function(e){console.error(e)})},methods:{handleEdit:function(e){this.editType="update",this.dialogFormVisible=!0,this.editingUser=this.users.find(function(t){return t._id===e})},handleDelete:function(e){delMenus(e).then(function(e){console.log(e)}).catch(function(e){console.error(e)})},addMenu:function(){this.editType="add",this.editingUser=JSON.parse(a()(r)),this.dialogFormVisible=!0},userOption:function(){var e=this;("add"===this.editType?addMenus:updateMenu)(this.editingUser).then(function(t){if(e.dialogFormVisible=!1,"add"===e.editType)e.users.push(t);else for(var i=0;i<e.users.length;i++)if(e.users[i]._id===e.editingUser._id){e.users[i].name=e.editingUser.name,e.users[i].password=e.editingUser.password;break}}).catch(function(e){console.error(e)})}}},l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-row",{staticClass:"btn-group"},[i("el-button",{attrs:{type:"primary"},on:{click:e.addMenu}},[e._v("添加用户")])],1),e._v(" "),i("el-table",{staticStyle:{width:"90%","margin-left":"15px","margin-top":"15px"},attrs:{data:e.users,stripe:!0,border:!0,"empty-text":"暂无数据"}},[i("el-table-column",{attrs:{label:"用户名",prop:"name"}}),e._v(" "),i("el-table-column",{attrs:{label:"密码",prop:"password"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.row._id)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handleDelete(t.row._id)}}},[e._v("删除")])]}}])}),e._v(" "),i("el-table-column",{attrs:{type:"expand",width:"80",label:"查看详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[i("el-form-item",{attrs:{label:"ID"}},[i("span",[e._v(e._s(t.row._id))])]),e._v(" "),i("el-form-item",{attrs:{label:"用户名"}},[i("span",[e._v(e._s(t.row.name))])]),e._v(" "),i("el-form-item",{attrs:{label:"密码"}},[i("span",[e._v(e._s(t.row.password))])]),e._v(" "),i("el-form-item",{attrs:{label:"创建时间"}},[i("span",[e._v(e._s(t.row.createdAt))])]),e._v(" "),i("el-form-item",{attrs:{label:"最近一次修改"}},[i("span",[e._v(e._s(t.row.updatedAt))])])],1)]}}])})],1),e._v(" "),i("el-dialog",{attrs:{title:"add"===e.editType?"添加用户":"编辑用户",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{attrs:{model:e.editingUser,inline:!0}},[i("el-form-item",{attrs:{label:"用户名","label-width":"80px"}},[i("el-input",{attrs:{autoComplete:"off"},model:{value:e.editingUser.name,callback:function(t){e.$set(e.editingUser,"name",t)},expression:"editingUser.name"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"密码","label-width":"80px"}},[i("el-input",{attrs:{autoComplete:"off"},model:{value:e.editingUser.password,callback:function(t){e.$set(e.editingUser,"password",t)},expression:"editingUser.password"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.userOption}},[e._v("确 定")])],1)],1)],1)},d=[];l._withStripped=!0;var u=i("XyMi"),c=!1;var p=function(e){c||i("0I7c")},f=Object(u.a)(o,l,d,!1,p,"data-v-17033ddf",null);f.options.__file="src\\views\\user-ctrl\\index.vue";t.default=f.exports},"0I7c":function(e,t,i){var n=i("67Bo");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("1b7d625c",n,!1)},"67Bo":function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.demo-table-expand[data-v-17033ddf] {\n  font-size: 0;\n}\n.demo-table-expand label[data-v-17033ddf] {\n  width: 90px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item[data-v-17033ddf] {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}\n.btn-group[data-v-17033ddf] {\n  margin: 10px 15px;\n}\n.el-input[data-v-17033ddf] {\n  width: 150px;\n}\n",""])},vMJZ:function(e,t,i){"use strict";t.a=function(e,t){return Object(n.a)({url:"users",method:"get",params:{limit:e,currentPage:t}})};var n=i("vLgD")}});